---
import "./navbar.scss";
import "../../styles/mediaQueries.scss";
import ThemeToggle from "./ThemeToggle.astro";
---

<header class="navbar-header">
  <div class="container">
    <nav class="nav" role="navigation" aria-label="Navegación principal">
      <a href="/" class="logo" aria-label="Ir al inicio">
        <img src="/solucion-factura-logo.png" alt="Solución Factura" />
      </a>

      <ul class="nav-list" role="menubar">
        <li role="none">
          <a class="nav-link" href="/" role="menuitem">Inicio</a>
        </li>
        <li role="none">
          <a class="nav-link" href="#caracteristicas" role="menuitem"
            >Características</a
          >
        </li>
        <li role="none">
          <a class="nav-link" href="#planes" role="menuitem">Planes</a>
        </li>
        <li role="none">
          <a class="nav-link" href="tel:+525593314767" role="menuitem">
            📞 Ventas: 55 9331 4767
          </a>
        </li>
        <li role="none">
          <a
            class="nav-link"
            href="https://wa.me/525576017764?text=Hola%20Soporte%2C%20necesito%20ayuda"
            target="_blank"
            rel="noopener noreferrer"
            role="menuitem"
          >
            <img
              src="/icons/whatsapp.svg"
              alt=""
              width="18"
              height="18"
              aria-hidden="true"
            />
            Soporte: 55 7601 7764
          </a>
        </li>
      </ul>

      <div class="nav-actions">
        <ThemeToggle />
        <a
          href="https://app.solucionfactura.mx"
          class="btn btn-primary login-btn"
          target="_blank"
          rel="noopener noreferrer"
        >
          <img
            width="24"
            height="24"
            src="/icons/user.svg"
            alt=""
            aria-hidden="true"
          />
          Iniciar Sesión
        </a>
        <button
          class="mobile-menu-toggle"
          aria-label="Abrir menú de navegación"
          aria-expanded="false"
          aria-controls="mobile-nav"
          type="button"
        >
          <img
            src="/icons/menu.svg"
            width="24"
            height="24"
            alt=""
            aria-hidden="true"
          />
        </button>
      </div>

      <div class="mobile-nav" id="mobile-nav" aria-hidden="true">
        <ul class="mobile-nav-list" role="menu">
          <li role="none">
            <a class="mobile-nav-link" href="/" role="menuitem">Inicio</a>
          </li>
          <li role="none">
            <a class="mobile-nav-link" href="#caracteristicas" role="menuitem">
              Características
            </a>
          </li>
          <li role="none">
            <a class="mobile-nav-link" href="#planes" role="menuitem">Planes</a>
          </li>
          <li role="none">
            <a
              class="mobile-nav-link"
              href="https://wa.me/525576017764?text=Hola%20Soporte%2C%20necesito%20ayuda"
              target="_blank"
              rel="noopener noreferrer"
              role="menuitem"
            >
              Soporte WhatsApp
            </a>
          </li>
          <li role="none">
            <a class="mobile-nav-link" href="tel:+525593314767" role="menuitem">
              Ventas: 55 9331 4767
            </a>
          </li>

          <li role="none">
            <a
              class="mobile-nav-link btn btn-primary btn-block"
              href="https://app.solucionfactura.mx"
              target="_blank"
              rel="noopener noreferrer"
              role="menuitem"
            >
              <img
                src="/icons/user.svg"
                alt=""
                height="24"
                width="24"
                aria-hidden="true"
              />
              Iniciar Sesión
            </a>
          </li>
        </ul>
      </div>
    </nav>
  </div>
</header>

<script>
  import { initNavbar } from "./navbar.js";

  // Inicializar navbar cuando el DOM esté listo
  if (document.readyState === "loading") {
    document.addEventListener("DOMContentLoaded", initNavbar);
  } else {
    initNavbar();
  }

  // Re-inicializar en navegación de Astro
  document.addEventListener("astro:page-load", initNavbar);
</script>
